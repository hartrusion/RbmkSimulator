/*
 * Copyright (C) 2025 Viktor Alexander Hartung
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
package com.hartrusion.rbmksim.gui.mnemonic;

import com.hartrusion.control.ValveState;
import com.hartrusion.modeling.assemblies.PumpState;
import com.hartrusion.mvc.UpdateReceiver;
import java.beans.PropertyChangeEvent;

/**
 *
 * @author viktor
 */
public class PanelMnemonicFeedwater extends javax.swing.JPanel implements UpdateReceiver {

    /**
     * Creates new form PanelMnemonicFeedwater
     */
    public PanelMnemonicFeedwater() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabelReadingFlow2 = new javax.swing.JLabel();
        jLabelReadingFlow1 = new javax.swing.JLabel();
        jLabelReadingPressure2 = new javax.swing.JLabel();
        jLabelReadingTemperature1 = new javax.swing.JLabel();
        jLabelReadingPressure1 = new javax.swing.JLabel();
        jLabelReadingTemperature2 = new javax.swing.JLabel();
        pump11 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        pump12 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        pump3 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        pump21 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        pump22 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        valve3In1 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve3in2 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve11Suction = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve12Suction = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve3Suction = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve21Suction = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve22Suction = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve11Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve12Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve3Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve21Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve22Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve3out1 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valve3out2 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        jLabelBackground = new javax.swing.JLabel();

        setMaximumSize(new java.awt.Dimension(400, 208));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabelReadingFlow2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingFlow2.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingFlow2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingFlow2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingFlow2.setText("____ kg/s");
        jLabelReadingFlow2.setMaximumSize(new java.awt.Dimension(64, 16));
        jLabelReadingFlow2.setMinimumSize(new java.awt.Dimension(64, 16));
        jLabelReadingFlow2.setOpaque(true);
        jLabelReadingFlow2.setPreferredSize(new java.awt.Dimension(64, 16));
        add(jLabelReadingFlow2, new org.netbeans.lib.awtextra.AbsoluteConstraints(292, 2, 64, 16));

        jLabelReadingFlow1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingFlow1.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingFlow1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingFlow1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingFlow1.setText("____ kg/s");
        jLabelReadingFlow1.setMaximumSize(new java.awt.Dimension(64, 16));
        jLabelReadingFlow1.setMinimumSize(new java.awt.Dimension(64, 16));
        jLabelReadingFlow1.setOpaque(true);
        jLabelReadingFlow1.setPreferredSize(new java.awt.Dimension(64, 16));
        add(jLabelReadingFlow1, new org.netbeans.lib.awtextra.AbsoluteConstraints(44, 2, 64, 16));

        jLabelReadingPressure2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingPressure2.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingPressure2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingPressure2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingPressure2.setText("___ bar");
        jLabelReadingPressure2.setOpaque(true);
        add(jLabelReadingPressure2, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 188, 56, 16));

        jLabelReadingTemperature1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingTemperature1.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingTemperature1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingTemperature1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingTemperature1.setText("___ 째C");
        jLabelReadingTemperature1.setOpaque(true);
        add(jLabelReadingTemperature1, new org.netbeans.lib.awtextra.AbsoluteConstraints(64, 188, 56, 16));

        jLabelReadingPressure1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingPressure1.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingPressure1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingPressure1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingPressure1.setText("___ bar");
        jLabelReadingPressure1.setOpaque(true);
        add(jLabelReadingPressure1, new org.netbeans.lib.awtextra.AbsoluteConstraints(4, 188, 56, 16));

        jLabelReadingTemperature2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingTemperature2.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingTemperature2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingTemperature2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingTemperature2.setText("___ 째C");
        jLabelReadingTemperature2.setOpaque(true);
        add(jLabelReadingTemperature2, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 188, 56, 16));

        pump11.setOrientation(3);
        pump11.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump11, new org.netbeans.lib.awtextra.AbsoluteConstraints(35, 79, -1, -1));

        pump12.setOrientation(3);
        pump12.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump12, new org.netbeans.lib.awtextra.AbsoluteConstraints(87, 79, -1, -1));

        pump3.setOrientation(3);
        pump3.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump3, new org.netbeans.lib.awtextra.AbsoluteConstraints(179, 79, -1, -1));

        pump21.setOrientation(3);
        pump21.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump21, new org.netbeans.lib.awtextra.AbsoluteConstraints(271, 79, -1, -1));

        pump22.setOrientation(3);
        pump22.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump22, new org.netbeans.lib.awtextra.AbsoluteConstraints(323, 79, -1, -1));
        add(valve3In1, new org.netbeans.lib.awtextra.AbsoluteConstraints(131, 23, -1, -1));
        add(valve3in2, new org.netbeans.lib.awtextra.AbsoluteConstraints(223, 23, -1, -1));

        valve11Suction.setVertical(true);
        add(valve11Suction, new org.netbeans.lib.awtextra.AbsoluteConstraints(44, 36, -1, -1));

        valve12Suction.setVertical(true);
        add(valve12Suction, new org.netbeans.lib.awtextra.AbsoluteConstraints(96, 36, -1, -1));

        valve3Suction.setVertical(true);
        add(valve3Suction, new org.netbeans.lib.awtextra.AbsoluteConstraints(188, 36, -1, -1));

        valve21Suction.setVertical(true);
        add(valve21Suction, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 36, -1, -1));

        valve22Suction.setVertical(true);
        add(valve22Suction, new org.netbeans.lib.awtextra.AbsoluteConstraints(332, 36, -1, -1));

        valve11Discharge.setVertical(true);
        add(valve11Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(58, 139, -1, -1));

        valve12Discharge.setVertical(true);
        add(valve12Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 139, -1, -1));

        valve3Discharge.setVertical(true);
        add(valve3Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(202, 139, -1, -1));

        valve21Discharge.setVertical(true);
        add(valve21Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(294, 139, -1, -1));

        valve22Discharge.setVertical(true);
        add(valve22Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(346, 139, -1, -1));
        add(valve3out1, new org.netbeans.lib.awtextra.AbsoluteConstraints(144, 174, -1, -1));
        add(valve3out2, new org.netbeans.lib.awtextra.AbsoluteConstraints(236, 174, -1, -1));

        jLabelBackground.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hartrusion/rbmksim/gui/mnemonic/MnemonicFeedwater.png"))); // NOI18N
        add(jLabelBackground, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabelBackground;
    private javax.swing.JLabel jLabelReadingFlow1;
    private javax.swing.JLabel jLabelReadingFlow2;
    private javax.swing.JLabel jLabelReadingPressure1;
    private javax.swing.JLabel jLabelReadingPressure2;
    private javax.swing.JLabel jLabelReadingTemperature1;
    private javax.swing.JLabel jLabelReadingTemperature2;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump11;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump12;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump21;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump22;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump3;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve11Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve11Suction;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve12Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve12Suction;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve21Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve21Suction;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve22Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve22Suction;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve3Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve3In1;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve3Suction;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve3in2;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve3out1;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valve3out2;
    // End of variables declaration//GEN-END:variables

    @Override
    public void updateComponent(PropertyChangeEvent evt) {
        if (!evt.getPropertyName().startsWith("Feedwater")) {
            return;
        }
        switch (evt.getPropertyName()) {
            case "Feedwater1#Pump1SuctionValve_Pos" ->
                valve11Suction.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater1#Pump1Pump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE -> pump11.setStatus(0);
                    case READY -> pump11.setStatus(1);
                    case STARTUP -> pump11.setStatus(2);
                    case RUNNING -> pump11.setStatus(3);
                }
            }
            case "Feedwater1#Pump1DischargeValve_Pos" ->
                valve11Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater1#Pump2SuctionValve_Pos" ->
                valve12Suction.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater1#Pump2Pump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE -> pump12.setStatus(0);
                    case READY -> pump12.setStatus(1);
                    case STARTUP -> pump12.setStatus(2);
                    case RUNNING -> pump12.setStatus(3);
                }
            }
            case "Feedwater1#Pump2DischargeValve_Pos" ->
                valve12Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater2#Pump1SuctionValve_Pos" ->
                valve21Suction.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater2#Pump1Pump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE -> pump21.setStatus(0);
                    case READY -> pump21.setStatus(1);
                    case STARTUP -> pump21.setStatus(2);
                    case RUNNING -> pump21.setStatus(3);
                }
            }
            case "Feedwater2#Pump1DischargeValve_Pos" ->
                valve21Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater2#Pump2SuctionValve_Pos" ->
                valve22Suction.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater2#Pump2Pump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE -> pump22.setStatus(0);
                    case READY -> pump22.setStatus(1);
                    case STARTUP -> pump22.setStatus(2);
                    case RUNNING -> pump22.setStatus(3);
                }
            }
            case "Feedwater2#Pump2DischargeValve_Pos" ->
                valve22Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater#Pump3SuctionValve_Pos" ->
                valve3Suction.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater#Pump3Pump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE -> pump3.setStatus(0);
                    case READY -> pump3.setStatus(1);
                    case STARTUP -> pump3.setStatus(2);
                    case RUNNING -> pump3.setStatus(3);
                }
            }
            case "Feedwater#Pump3DischargeValve_Pos" ->
                valve3Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater1#SparePumpInValve_Pos" ->
                valve3In1.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater2#SparePumpInValve_Pos" ->
                valve3in2.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater1#SparePumpOutValve_Pos" ->
                valve3out1.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "Feedwater2#SparePumpOutValve_Pos" ->
                valve3out2.setActive(evt.getNewValue() != ValveState.CLOSED);
        }
    }

    @Override
    public void updateComponent(String propertyName, Object newValue) {

    }

    @Override
    public void updateComponent(String propertyName, double newValue) {
        switch (propertyName) {
            case "Feedwater1#Pressure" ->
                jLabelReadingPressure1.setText(
                        String.format("%.1f", newValue)
                                .replaceAll("(\\.\\d+?)0*$", "$1") + " bar");
            case "Feedwater1#Temperature" ->
                jLabelReadingTemperature1.setText(
                        String.format("%.1f", newValue)
                                .replaceAll("(\\.\\d+?)0*$", "$1") + " 째C");
            case "DA1#OutFlow" ->
                jLabelReadingFlow1.setText(
                        String.format("%.0f", newValue) + " kg/s");
            case "Feedwater2#Pressure" ->
                jLabelReadingPressure2.setText(
                        String.format("%.1f", newValue)
                                .replaceAll("(\\.\\d+?)0*$", "$1") + " bar");
            case "Feedwater2#Temperature" ->
                jLabelReadingTemperature2.setText(
                        String.format("%.1f", newValue)
                                .replaceAll("(\\.\\d+?)0*$", "$1") + " 째C");
            case "DA2#OutFlow" ->
                jLabelReadingFlow2.setText(
                        String.format("%.0f", newValue) + " kg/s");
        }
    }

    @Override
    public void updateComponent(String propertyName, boolean newValue) {

    }
}
