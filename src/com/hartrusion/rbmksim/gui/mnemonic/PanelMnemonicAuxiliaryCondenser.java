/*
 * Copyright (C) 2025 Viktor Alexander Hartung
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
package com.hartrusion.rbmksim.gui.mnemonic;

import com.hartrusion.control.ControlCommand;
import com.hartrusion.control.ValveState;
import com.hartrusion.modeling.automated.PumpState;
import static com.hartrusion.modeling.automated.PumpState.*;
import java.beans.PropertyChangeEvent;
import com.hartrusion.mvc.UpdateReceiver;

/**
 *
 * @author Viktor Alexander Hartung
 */
public class PanelMnemonicAuxiliaryCondenser extends javax.swing.JPanel
        implements UpdateReceiver {

    /**
     * Creates new form PanelMneomonicInternalLoad
     */
    public PanelMnemonicAuxiliaryCondenser() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        valveCoolant1 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveCoolant2 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveToHotwell = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveToDrain = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valvePump2Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valvePump1Discharge = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveFromMain1 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveFromMain2 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valvePassiveFlow = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveCondDrain1 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        valveCondDrain2 = new com.hartrusion.rbmksim.gui.mnemonic.Valve();
        pump1 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        pump2 = new com.hartrusion.rbmksim.gui.mnemonic.Pump();
        jLabelReadingSteamValve2 = new javax.swing.JLabel();
        jLabelReadingCoolantValve2 = new javax.swing.JLabel();
        jLabelReadingCoolantValve1 = new javax.swing.JLabel();
        jLabelReadingCondensateValve1 = new javax.swing.JLabel();
        jLabelReadingCondensateValve2 = new javax.swing.JLabel();
        jLabelReadingValveToHotwell = new javax.swing.JLabel();
        jLabelReadingValveToDrain = new javax.swing.JLabel();
        jLabelReadingSteamValve1 = new javax.swing.JLabel();
        jLabelReadingSteamFlow1 = new javax.swing.JLabel();
        jLabelReadingSteamFlow2 = new javax.swing.JLabel();
        jLabelReadingCondenser2Temperature = new javax.swing.JLabel();
        jLabelReadingCondenser1Temperature = new javax.swing.JLabel();
        jLabelReadingCondenser1Level = new javax.swing.JLabel();
        jLabelReadingCondenser2Level = new javax.swing.JLabel();
        jLabelReadingCondensateTemperature = new javax.swing.JLabel();
        jLabelBackground = new javax.swing.JLabel();

        setMaximumSize(new java.awt.Dimension(220, 308));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
        add(valveCoolant1, new org.netbeans.lib.awtextra.AbsoluteConstraints(51, 83, -1, -1));
        add(valveCoolant2, new org.netbeans.lib.awtextra.AbsoluteConstraints(129, 83, -1, -1));
        add(valveToHotwell, new org.netbeans.lib.awtextra.AbsoluteConstraints(165, 233, -1, -1));
        add(valveToDrain, new org.netbeans.lib.awtextra.AbsoluteConstraints(165, 273, -1, -1));

        valvePump2Discharge.setVertical(true);
        add(valvePump2Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(115, 256, -1, -1));

        valvePump1Discharge.setVertical(true);
        add(valvePump1Discharge, new org.netbeans.lib.awtextra.AbsoluteConstraints(63, 256, -1, -1));

        valveFromMain1.setVertical(true);
        add(valveFromMain1, new org.netbeans.lib.awtextra.AbsoluteConstraints(19, 16, -1, -1));

        valveFromMain2.setVertical(true);
        add(valveFromMain2, new org.netbeans.lib.awtextra.AbsoluteConstraints(183, 16, -1, -1));

        valvePassiveFlow.setVertical(true);
        add(valvePassiveFlow, new org.netbeans.lib.awtextra.AbsoluteConstraints(7, 230, -1, -1));

        valveCondDrain1.setControlIndicator(true);
        valveCondDrain1.setVertical(true);
        add(valveCondDrain1, new org.netbeans.lib.awtextra.AbsoluteConstraints(8, 143, -1, -1));

        valveCondDrain2.setControlIndicator(true);
        valveCondDrain2.setVertical(true);
        add(valveCondDrain2, new org.netbeans.lib.awtextra.AbsoluteConstraints(172, 143, -1, -1));

        pump1.setOrientation(3);
        pump1.setMinimumSize(new java.awt.Dimension(36, 41));
        pump1.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump1, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 213, -1, -1));

        pump2.setOrientation(3);
        pump2.setMinimumSize(new java.awt.Dimension(36, 41));
        pump2.setPreferredSize(new java.awt.Dimension(36, 41));
        add(pump2, new org.netbeans.lib.awtextra.AbsoluteConstraints(92, 213, -1, -1));

        jLabelReadingSteamValve2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingSteamValve2.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingSteamValve2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingSteamValve2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingSteamValve2.setText("___");
        jLabelReadingSteamValve2.setOpaque(true);
        add(jLabelReadingSteamValve2, new org.netbeans.lib.awtextra.AbsoluteConstraints(156, 28, 24, -1));

        jLabelReadingCoolantValve2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCoolantValve2.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingCoolantValve2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCoolantValve2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCoolantValve2.setText("___");
        jLabelReadingCoolantValve2.setOpaque(true);
        add(jLabelReadingCoolantValve2, new org.netbeans.lib.awtextra.AbsoluteConstraints(138, 68, 24, -1));

        jLabelReadingCoolantValve1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCoolantValve1.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingCoolantValve1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCoolantValve1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCoolantValve1.setText("___");
        jLabelReadingCoolantValve1.setOpaque(true);
        add(jLabelReadingCoolantValve1, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 68, 24, -1));

        jLabelReadingCondensateValve1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondensateValve1.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingCondensateValve1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondensateValve1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondensateValve1.setText("___");
        jLabelReadingCondensateValve1.setOpaque(true);
        add(jLabelReadingCondensateValve1, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 170, 24, -1));

        jLabelReadingCondensateValve2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondensateValve2.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingCondensateValve2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondensateValve2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondensateValve2.setText("___");
        jLabelReadingCondensateValve2.setOpaque(true);
        add(jLabelReadingCondensateValve2, new org.netbeans.lib.awtextra.AbsoluteConstraints(192, 170, 24, -1));

        jLabelReadingValveToHotwell.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingValveToHotwell.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingValveToHotwell.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingValveToHotwell.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingValveToHotwell.setText("___");
        jLabelReadingValveToHotwell.setOpaque(true);
        add(jLabelReadingValveToHotwell, new org.netbeans.lib.awtextra.AbsoluteConstraints(174, 254, 24, -1));

        jLabelReadingValveToDrain.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingValveToDrain.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingValveToDrain.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingValveToDrain.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingValveToDrain.setText("___");
        jLabelReadingValveToDrain.setOpaque(true);
        add(jLabelReadingValveToDrain, new org.netbeans.lib.awtextra.AbsoluteConstraints(174, 294, 24, -1));

        jLabelReadingSteamValve1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingSteamValve1.setFont(new java.awt.Font("Monospaced", 0, 10)); // NOI18N
        jLabelReadingSteamValve1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingSteamValve1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingSteamValve1.setText("___");
        jLabelReadingSteamValve1.setOpaque(true);
        add(jLabelReadingSteamValve1, new org.netbeans.lib.awtextra.AbsoluteConstraints(38, 30, 24, -1));

        jLabelReadingSteamFlow1.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingSteamFlow1.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingSteamFlow1.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingSteamFlow1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingSteamFlow1.setText("____ kg/s");
        jLabelReadingSteamFlow1.setOpaque(true);
        add(jLabelReadingSteamFlow1, new org.netbeans.lib.awtextra.AbsoluteConstraints(44, 4, 56, 16));

        jLabelReadingSteamFlow2.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingSteamFlow2.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingSteamFlow2.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingSteamFlow2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingSteamFlow2.setText("____ kg/s");
        jLabelReadingSteamFlow2.setOpaque(true);
        add(jLabelReadingSteamFlow2, new org.netbeans.lib.awtextra.AbsoluteConstraints(118, 4, 56, 16));

        jLabelReadingCondenser2Temperature.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondenser2Temperature.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingCondenser2Temperature.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondenser2Temperature.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondenser2Temperature.setText("____ °C");
        jLabelReadingCondenser2Temperature.setOpaque(true);
        add(jLabelReadingCondenser2Temperature, new org.netbeans.lib.awtextra.AbsoluteConstraints(112, 138, 56, 16));

        jLabelReadingCondenser1Temperature.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondenser1Temperature.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingCondenser1Temperature.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondenser1Temperature.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondenser1Temperature.setText("____ °C");
        jLabelReadingCondenser1Temperature.setOpaque(true);
        add(jLabelReadingCondenser1Temperature, new org.netbeans.lib.awtextra.AbsoluteConstraints(34, 138, 56, 16));

        jLabelReadingCondenser1Level.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondenser1Level.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingCondenser1Level.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondenser1Level.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondenser1Level.setText("___");
        jLabelReadingCondenser1Level.setOpaque(true);
        add(jLabelReadingCondenser1Level, new org.netbeans.lib.awtextra.AbsoluteConstraints(12, 72, 32, 16));

        jLabelReadingCondenser2Level.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondenser2Level.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingCondenser2Level.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondenser2Level.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondenser2Level.setText("___");
        jLabelReadingCondenser2Level.setOpaque(true);
        add(jLabelReadingCondenser2Level, new org.netbeans.lib.awtextra.AbsoluteConstraints(176, 72, 32, 16));

        jLabelReadingCondensateTemperature.setBackground(new java.awt.Color(77, 69, 27));
        jLabelReadingCondensateTemperature.setFont(new java.awt.Font("Monospaced", 1, 10)); // NOI18N
        jLabelReadingCondensateTemperature.setForeground(new java.awt.Color(231, 255, 166));
        jLabelReadingCondensateTemperature.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabelReadingCondensateTemperature.setText("___ °C");
        jLabelReadingCondensateTemperature.setOpaque(true);
        add(jLabelReadingCondensateTemperature, new org.netbeans.lib.awtextra.AbsoluteConstraints(158, 214, 56, 16));

        jLabelBackground.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hartrusion/rbmksim/gui/mnemonic/MnemonicAuxiliaryCondenser.png"))); // NOI18N
        add(jLabelBackground, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, -1));
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabelBackground;
    private javax.swing.JLabel jLabelReadingCondensateTemperature;
    private javax.swing.JLabel jLabelReadingCondensateValve1;
    private javax.swing.JLabel jLabelReadingCondensateValve2;
    private javax.swing.JLabel jLabelReadingCondenser1Level;
    private javax.swing.JLabel jLabelReadingCondenser1Temperature;
    private javax.swing.JLabel jLabelReadingCondenser2Level;
    private javax.swing.JLabel jLabelReadingCondenser2Temperature;
    private javax.swing.JLabel jLabelReadingCoolantValve1;
    private javax.swing.JLabel jLabelReadingCoolantValve2;
    private javax.swing.JLabel jLabelReadingSteamFlow1;
    private javax.swing.JLabel jLabelReadingSteamFlow2;
    private javax.swing.JLabel jLabelReadingSteamValve1;
    private javax.swing.JLabel jLabelReadingSteamValve2;
    private javax.swing.JLabel jLabelReadingValveToDrain;
    private javax.swing.JLabel jLabelReadingValveToHotwell;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump1;
    private com.hartrusion.rbmksim.gui.mnemonic.Pump pump2;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveCondDrain1;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveCondDrain2;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveCoolant1;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveCoolant2;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveFromMain1;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveFromMain2;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valvePassiveFlow;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valvePump1Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valvePump2Discharge;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveToDrain;
    private com.hartrusion.rbmksim.gui.mnemonic.Valve valveToHotwell;
    // End of variables declaration//GEN-END:variables

    @Override
    public void updateComponent(PropertyChangeEvent evt) {
        if (!evt.getPropertyName().startsWith("AuxCond")) {
            return;
        }
        switch (evt.getPropertyName()) {
            case "AuxCond1#CondPumpsPump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE ->
                        pump1.setStatus(0);
                    case READY ->
                        pump1.setStatus(1);
                    case STARTUP ->
                        pump1.setStatus(2);
                    case RUNNING ->
                        pump1.setStatus(3);
                }
            }
            case "AuxCond1#CondPumpsDischargeValve_Pos" ->
                valvePump1Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond2#CondPumpsPump_State" -> {
                switch ((PumpState) evt.getNewValue()) {
                    case OFFLINE ->
                        pump2.setStatus(0);
                    case READY ->
                        pump2.setStatus(1);
                    case STARTUP ->
                        pump2.setStatus(2);
                    case RUNNING ->
                        pump2.setStatus(3);
                }
            }
            case "AuxCond2#CondPumpsDischargeValve_Pos" ->
                valvePump2Discharge.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond1#CondensateValve_Pos" ->
                valveCondDrain1.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond2#CondensateValve_Pos" ->
                valveCondDrain2.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond1#CondensateValveControlState" -> {
                if (evt.getNewValue() == ControlCommand.AUTOMATIC) {
                    valveCondDrain1.setControlIndicatorActive(true);
                } else if (evt.getNewValue() == ControlCommand.MANUAL_OPERATION) {
                    valveCondDrain1.setControlIndicatorActive(false);
                }
            }
            case "AuxCond2#CondensateValveControlState" -> {
                if (evt.getNewValue() == ControlCommand.AUTOMATIC) {
                    valveCondDrain2.setControlIndicatorActive(true);
                } else if (evt.getNewValue() == ControlCommand.MANUAL_OPERATION) {
                    valveCondDrain2.setControlIndicatorActive(false);
                }
            }
            case "AuxCond#Bypass_Pos" ->
                valvePassiveFlow.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond1#SteamValve_Pos" ->
                valveFromMain1.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond2#SteamValve_Pos" ->
                valveFromMain2.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond#ToHotwell_Pos" ->
                valveToHotwell.setActive(evt.getNewValue() != ValveState.CLOSED);
            case "AuxCond#ToDrain_Pos" ->
                valveToDrain.setActive(evt.getNewValue() != ValveState.CLOSED);
        }
    }

    @Override
    public void updateComponent(String propertyName, Object newValue) {

    }

    @Override
    public void updateComponent(String propertyName, double newValue) {
        if (!propertyName.startsWith("AuxCond")) {
            return;
        }
        switch (propertyName) {
            case "AuxCond1#Level" ->
                jLabelReadingCondenser1Level.setText(
                        String.format("%.1f", newValue));
            case "AuxCond2#Level" ->
                jLabelReadingCondenser2Level.setText(
                        String.format("%.1f", newValue));
            case "AuxCond1#Temperature" ->
                jLabelReadingCondenser1Temperature.setText(
                        String.format("%.1f", newValue) + " °C");
            case "AuxCond2#Temperature" ->
                jLabelReadingCondenser2Temperature.setText(
                        String.format("%.1f", newValue) + " °C");
            case "AuxCond1#SteamFlow" ->
                jLabelReadingSteamFlow1.setText(
                        String.format("%.0f", newValue) + " kg/s");
            case "AuxCond2#SteamFlow" ->
                jLabelReadingSteamFlow2.setText(
                        String.format("%.0f", newValue) + " kg/s");
            case "AuxCond1#SteamValve" ->
                jLabelReadingSteamValve1.setText(
                        String.format("%.0f", newValue));
            case "AuxCond2#SteamValve" ->
                jLabelReadingSteamValve2.setText(
                        String.format("%.0f", newValue));
            case "AuxCond1#CondensateValve" ->
                jLabelReadingCondensateValve1.setText(
                        String.format("%.0f", newValue));
            case "AuxCond2#CondensateValve" ->
                jLabelReadingCondensateValve2.setText(
                        String.format("%.0f", newValue));
            case "AuxCond#ToHotwell" ->
                jLabelReadingValveToHotwell.setText(
                        String.format("%.0f", newValue));
            case "AuxCond#ToDrain" ->
                jLabelReadingValveToDrain.setText(
                        String.format("%.0f", newValue));
            case "AuxCond1#CoolantValve" -> {
                jLabelReadingCoolantValve1.setText(
                        String.format("%.0f", newValue));
                valveCoolant1.setActive(newValue >= 5);
            }
            case "AuxCond2#CoolantValve" -> {
                jLabelReadingCoolantValve2.setText(
                        String.format("%.0f", newValue));
                valveCoolant2.setActive(newValue >= 5);
            }
        }
    }

    @Override
    public void updateComponent(String propertyName, boolean newValue) {

    }
}
